(function(e){"use strict";var t={},i=function(e){var s,r,n,a,o;i.classes.dispatcher.extend(this);var l=this,d=e||{};if("string"==typeof d||d instanceof HTMLElement?d={renderers:[d]}:"[object Array]"===Object.prototype.toString.call(d)&&(d={renderers:d}),a=d.renderers||d.renderer||d.container,d.renderers&&0!==d.renderers.length||("string"==typeof a||a instanceof HTMLElement||"object"==typeof a&&"container"in a)&&(d.renderers=[a]),d.id){if(t[d.id])throw'sigma: Instance "'+d.id+'" already exists.';Object.defineProperty(this,"id",{value:d.id})}else{for(o=0;t[o];)o++;Object.defineProperty(this,"id",{value:""+o})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,d.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),s=0,r=(n=d.renderers||[]).length;r>s;s++)this.addRenderer(n[s]);for(s=0,r=(n=d.middlewares||[]).length;r>s;s++)this.middlewares.push("string"==typeof n[s]?i.middlewares[n[s]]:n[s]);"object"==typeof d.graph&&d.graph&&(this.graph.read(d.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(i.prototype.addCamera=function(t){var s,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return s=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=s,s.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(s.edgequadtree=new i.classes.edgequad),s.bind("coordinatesUpdated",function(e){r.renderCamera(s,s.isAnimated)}),this.renderersPerCamera[t]=[],s},i.prototype.killCamera=function(e){if(!(e="string"==typeof e?this.cameras[e]:e))throw"sigma.killCamera: The camera is undefined.";var t,i=this.renderersPerCamera[e.id];for(t=i.length-1;t>=0;t--)this.killRenderer(i[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,s,r,n,a=e||{};if("string"==typeof a?a={container:document.getElementById(a)}:a instanceof HTMLElement&&(a={container:a}),"string"==typeof a.container&&(a.container=document.getElementById(a.container)),"id"in a)t=a.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(s="function"==typeof a.type?a.type:i.renderers[a.type],s=s||i.renderers.def,r="camera"in a?a.camera instanceof i.classes.camera?a.camera:this.cameras[a.camera]||this.addCamera(a.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return n=new s(this.graph,r,this.settings,a),this.renderers[t]=n,Object.defineProperty(n,"id",{value:t}),n.bind&&n.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(n),n},i.prototype.killRenderer=function(e){if(!(e="string"==typeof e?this.renderers[e]:e))throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var s,r,n,a,o,l,d=0;for(t=t||{},a=this.middlewares||[],s=0,r=a.length;r>s;s++)a[s].call(this,0===s?"":"tmp"+d+":",s===r-1?"ready:":"tmp"+ ++d+":");for(n in this.cameras)(o=this.cameras[n]).settings("autoRescale")&&this.renderersPerCamera[o.id]&&this.renderersPerCamera[o.id].length?i.middlewares.rescale.call(this,a.length?"ready:":"",o.readPrefix,{width:this.renderersPerCamera[o.id][0].width,height:this.renderersPerCamera[o.id][0].height}):i.middlewares.copy.call(this,a.length?"ready:":"",o.readPrefix),t.skipIndexation||(l=i.utils.getBoundaries(this.graph,o.readPrefix),o.quadtree.index(this.graph.nodes(),{prefix:o.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),o.edgequadtree!==e&&o.settings("drawEdges")&&o.settings("enableEdgeHovering")&&o.edgequadtree.index(this.graph,{prefix:o.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(a=Object.keys(this.renderers),s=0,r=a.length;r>s;s++)if(this.renderers[a[s]].process)if(this.settings("skipErrors"))try{this.renderers[a[s]].process()}catch(e){console.log('Warning: The renderer "'+a[s]+'" crashed on ".process()"')}else this.renderers[a[s]].process();return this.render(),this},i.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;t>e;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(t){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,t){var i,s,r,n=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete n.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.0.3",void 0!==this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this),function(e){"use strict";function t(e,i){var s,r,n,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(a=Array.isArray(e)?e:e.split(/ /),s=0,r=a.length;s!==r;s+=1)n=a[s],w[n]||(w[n]=[]),w[n].push({handler:i})}function i(e,t){var i,s,r,n,a,o,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(o=l[i],w[o])for(a={type:o,data:t||{}},s=0,n=w[o].length;s!==n;s+=1)try{w[o][s].handler(a)}catch(e){}}function s(){var e,t,i,s,r=!1,n=g(),a=y.shift();if(i=a.job(),n=g()-n,a.done++,a.time+=n,a.currentTime+=n,a.weightTime=a.currentTime/(a.weight||1),a.averageTime=a.time/a.done,!(s=a.count?a.count<=a.done:!i)){for(e=0,t=y.length;t>e;e++)if(y[e].weightTime>a.weightTime){y.splice(e,0,a),r=!0;break}r||y.push(a)}return s?a:null}function r(e){var t=y.length;p[e.id]=e,e.status="running",t&&(e.weightTime=y[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=g(),i("jobStarted",h(e)),y.push(e)}function n(){var e,t,a;for(e in f)(t=f[e]).after?x[e]=t:r(t),delete f[e];for(m=!!y.length;y.length&&g()-u<E.frameDuration;)if(a=s()){o(a.id);for(e in x)x[e].after===a.id&&(r(x[e]),delete x[e])}m?(u=g(),i("enterFrame"),setTimeout(n,0)):i("stop")}function a(e,t){var s,r,o;if(Array.isArray(e)){for(b=!0,s=0,r=e.length;r>s;s++)a(e[s].id,d(e[s],t));b=!1,m||(u=g(),i("start"),n())}else if("object"==typeof e)if("string"==typeof e.id)a(e.id,e);else{b=!0;for(s in e)"function"==typeof e[s]?a(s,d({job:e[s]},t)):a(s,d(e[s],t));b=!1,m||(u=g(),i("start"),n())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(l(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)o={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");o=d({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}f[e]=o,i("jobAdded",h(o)),m||b||(u=g(),i("start"),n())}return this}function o(e){var t,s,r,n,a=!1;if(Array.isArray(e))for(t=0,s=e.length;s>t;t++)o(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(t=0,s=(r=[p,x,f]).length;s>t;t++)e in r[t]&&(n=r[t][e],E.history&&(n.status="done",v.push(n)),i("jobEnded",h(n)),delete r[t][e],"function"==typeof n.end&&n.end(),a=!0);for(t=0,s=(r=y).length;s>t;t++)if(r[t].id===e){r.splice(t,1);break}if(!a)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function l(e){var t=f[e]||p[e]||x[e];return t?d(t):null}function d(){var e,t,i={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function h(e){var t,i,s;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,s=e.length;s>i;i++)t.push(h(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=h(e[i])}else t=e;return t}function c(e){var t,i=[];for(t in e)i.push(e[t]);return i}function g(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var u,m=!1,f={},p={},y=[],x={},v=[],b=!1,E={frameDuration:20,history:!0},w=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var A={hasJob:l,addJob:a,killJob:o,killAll:function(){var e,t=d(f,p,x);if(E.history)for(e in t)t[e].status="done",v.push(t[e]),"function"==typeof t[e].end&&t[e].end();return f={},x={},p={},y=[],m=!1,this},settings:function(e,t){var i;if("string"==typeof a1&&1===arguments.length)return E[a1];i="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(i[a1]=a2);for(var s in i)void 0!==i[s]?E[s]=i[s]:delete E[s];return this},getStats:function(e,t){var i,s,r,n,a,o,l;if(!arguments.length){a=[];for(s in f)a.push(f[s]);for(s in x)a.push(x[s]);for(s in p)a.push(p[s]);a=a.concat(v)}if("string"==typeof e)switch(e){case"waiting":a=c(x);break;case"running":a=c(p);break;case"done":a=v;break;default:o=e}if(e instanceof RegExp&&(o=e),!o&&("string"==typeof t||t instanceof RegExp)&&(o=t),o){if(l="string"==typeof o,a instanceof Array)i=a;else if("object"==typeof a){i=[];for(s in a)i=i.concat(a[s])}else{i=[];for(s in f)i.push(f[s]);for(s in x)i.push(x[s]);for(s in p)i.push(p[s]);i=i.concat(v)}for(a=[],r=0,n=i.length;n>r;r++)(l?i[r].id===o:i[r].id.match(o))&&a.push(i[r])}return h(a)},isRunning:function(){return m},clearHistory:function(){return v=[],this},bind:t,unbind:function(e,t){var i,s,r,n,a,o,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,s=l.length;i!==s;i+=1){if(o=l[i],w[o]){for(a=[],r=0,n=w[o].length;r!==n;r+=1)w[o][r].handler!==t&&a.push(w[o][r]);w[o]=a}w[o]&&0===w[o].length&&delete w[o]}else for(i=0,s=l.length;i!==s;i+=1)delete w[l[i]];else w=Object.create(null)},version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports.conrad=A),e.conrad=A}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,i={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}();var i={};sigma.utils.floatColor=function(e){if(i[e])return i[e];var t=e,s=0,r=0,n=0;"#"===e[0]?3===(e=e.slice(1)).length?(s=parseInt(e.charAt(0)+e.charAt(0),16),r=parseInt(e.charAt(1)+e.charAt(1),16),n=parseInt(e.charAt(2)+e.charAt(2),16)):(s=parseInt(e.charAt(0)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(3),16),n=parseInt(e.charAt(4)+e.charAt(5),16)):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),s=+e[1],r=+e[2],n=+e[3]);var a=256*s*256+256*r+n;return i[t]=a,a},sigma.utils.zoomTo=function(e,t,i,s,r){var n,a,o,l=e.settings;(a=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*s)))!==e.ratio&&(s=a/e.ratio,o={x:t*(1-s)+e.x,y:i*(1-s)+e.y,ratio:a},r&&r.duration?(n=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:n?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,o,r)):(e.goTo(o),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,s){return{x:(e+i)/2+(s-t)/4,y:(t+s)/2+(e-i)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,s,r,n,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*n+Math.pow(e,2)*s,y:Math.pow(1-e,2)*i+2*(1-e)*e*a+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,s,r,n,a,o,l){var d=Math.pow(1-e,3),h=3*e*Math.pow(1-e,2),c=3*Math.pow(e,2)*(1-e),g=Math.pow(e,3);return{x:d*t+h*n+c*o+g*s,y:d*i+h*a+c*l+g*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,s){return Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))},sigma.utils.getCircleIntersection=function(e,t,i,s,r,n){var a,o,l,d,h,c,g,u,m;return o=s-e,l=r-t,!((d=Math.sqrt(l*l+o*o))>i+n)&&(!(d<Math.abs(i-n))&&(m=t+l*(a=(i*i-n*n+d*d)/(2*d))/d,{xi:(u=e+o*a/d)+(c=(h=Math.sqrt(i*i-a*a))/d*-l),xi_prime:u-c,yi:m+(g=o*(h/d)),yi_prime:m-g}))},sigma.utils.isPointOnSegment=function(e,t,i,s,r,n,a){return a>Math.abs((t-s)*(r-i)-(e-i)*(n-s))/sigma.utils.getDistance(i,s,r,n)&&Math.min(i,r)<=e&&e<=Math.max(i,r)&&Math.min(s,n)<=t&&t<=Math.max(s,n)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,s,r,n,a,o,l){var d=sigma.utils.getDistance(i,s,r,n);if(Math.abs(e-i)>d||Math.abs(t-s)>d)return!1;for(var h,c=sigma.utils.getDistance(e,t,i,s),g=.5,u=sigma.utils.getDistance(e,t,r,n)>c?-.01:.01,m=100,f=sigma.utils.getPointOnQuadraticCurve(g,i,s,r,n,a,o),p=sigma.utils.getDistance(e,t,f.x,f.y);m-- >0&&g>=0&&1>=g&&p>l&&(u>.001||-.001>u);)h=p,f=sigma.utils.getPointOnQuadraticCurve(g,i,s,r,n,a,o),(p=sigma.utils.getDistance(e,t,f.x,f.y))>h?(u=-u/2,g+=u):0>g+u||g+u>1?(u/=2,p=h):g+=u;return l>p},sigma.utils.isPointOnBezierCurve=function(e,t,i,s,r,n,a,o,l,d,h){var c=sigma.utils.getDistance(i,s,a,o);if(Math.abs(e-i)>c||Math.abs(t-s)>c)return!1;for(var g,u=sigma.utils.getDistance(e,t,i,s),m=.5,f=sigma.utils.getDistance(e,t,r,n)>u?-.01:.01,p=100,y=sigma.utils.getPointOnBezierCurve(m,i,s,r,n,a,o,l,d),x=sigma.utils.getDistance(e,t,y.x,y.y);p-- >0&&m>=0&&1>=m&&x>h&&(f>.001||-.001>f);)g=x,y=sigma.utils.getPointOnBezierCurve(m,i,s,r,n,a,o,l,d),(x=sigma.utils.getDistance(e,t,y.x,y.y))>g?(f=-f/2,m+=f):0>m+f||m+f>1?(f/=2,x=g):m+=f;return h>x},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,i){return t=t||sigma.utils.getX(e),i=i||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:i-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var s,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],(s=e._doubleClickHandler[t]).push(function(e){return 2==++r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,s[s.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,s=(e._doubleClickHandler||{})[t]||[];i=s.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,s){var r=e.createShader(i);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(s&&s('Error compiling shader "'+r+'":'+e.getShaderInfoLog(r)),e.deleteShader(r),null)},sigma.utils.loadProgram=function(e,t,i,s,r){var n,a=e.createProgram();for(n=0;n<t.length;++n)e.attachShader(a,t[n]);if(i)for(n=0;n<i.length;++n)e.bindAttribLocation(a,locations?locations[n]:n,opt_attribs[n]);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(r&&r("Error in program linking: "+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),s=Math.sin(e);return t?[i,-s,s,i]:[i,-s,0,s,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var s=i?2:3,r=e[0*s+0],n=e[0*s+1],a=e[0*s+2],o=e[1*s+0],l=e[1*s+1],d=e[1*s+2],h=e[2*s+0],c=e[2*s+1],g=e[2*s+2],u=t[0*s+0],m=t[0*s+1],f=t[0*s+2],p=t[1*s+0],y=t[1*s+1],x=t[1*s+2],v=t[2*s+0],b=t[2*s+1],E=t[2*s+2];return i?[r*u+n*p,r*m+n*y,o*u+l*p,o*m+l*y]:[r*u+n*p+a*v,r*m+n*y+a*b,r*f+n*x+a*E,o*u+l*p+d*v,o*m+l*y+d*b,o*f+l*x+d*E,h*u+c*p+g*v,h*m+c*y+g*b,h*f+c*x+g*E]}}.call(this),function(e){"use strict";var t,i=0,s=["ms","moz","webkit","o"];for(t=0;t<s.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[s[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[s[t]+"CancelAnimationFrame"]||e[s[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,s){var r=(new Date).getTime(),n=Math.max(0,16-(r-i)),a=e.setTimeout(function(){t(r+n)},n);return i=r+n,a}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,s=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,s.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,s,r,n;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(i=0,s=(n="string"==typeof e?e.split(" "):e).length;i!==s;i+=1)(r=n[i])&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,s,r,n,a,o,l,d="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(i=0,s=d.length;i!==s;i+=1){if(l=d[i],this._handlers[l]){for(o=[],r=0,n=this._handlers[l].length;r!==n;r+=1)this._handlers[l][r].handler!==t&&o.push(this._handlers[l][r]);this._handlers[l]=o}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,s=d.length;i!==s;i+=1)delete this._handlers[d[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,s,r,n,a,o,l,d=this,h="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,s=h.length;i!==s;i+=1)if(l=h[i],this._handlers[l]){for(o=d.getEvent(l,t),a=[],r=0,n=this._handlers[l].length;r!==n;r+=1)this._handlers[l][r].handler(o),this._handlers[l][r].one||a.push(this._handlers[l][r]);this._handlers[l]=a}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var s;for(s in e.prototype)e.prototype.hasOwnProperty(s)&&(t[s]=e.prototype[s]);e.apply(t,i)},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,s={},r=Array.prototype.slice.call(arguments,0),n=function(e,t){var i,a,o,l;if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:n(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),a=0,o=(l=Object.keys(i)).length;o>a;a++)s[l[a]]=i[l[a]];return this}if(void 0!==s[e])return s[e];for(a=0,o=r.length;o>a;a++)if(void 0!==r[a][e])return r[a][e]};for(n.embedObjects=function(){var t=r.concat(s).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;i>t;t++)n(arguments[t]);return n};void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function t(e,t,i){return function(){var s,r;for(s in o[e])o[e][s].apply(t,arguments);r=i.apply(t,arguments);for(s in a[e])a[e][s].apply(t,arguments);return r}}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var s=Object.create(null),r=Object.create(null),n=Object.create(null),a=Object.create(null),o=Object.create(null),l={immutable:!0,clone:!0},d=function(e){return l[e]},h=function(e){var i,r,a;a={settings:e||d,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(i in n)n[i].call(a);for(i in s)r=t(i,a,s[i]),this[i]=r,a[i]=r};h.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(s[e]||h[e])throw'The method "'+e+'" already exists.';return s[e]=t,a[e]=Object.create(null),o[e]=Object.create(null),this},h.hasMethod=function(e){return!(!s[e]&&!h[e])},h.attach=function(e,t,i,s){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=n;else if(s){if(!o[e])throw'The method "'+e+'" does not exist.';r=o[e]}else{if(!a[e])throw'The method "'+e+'" does not exist.';r=a[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},h.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},h.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(r[e])throw'The index "'+e+'" already exists.';var i;r[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";h.attach(i,e,t[i])}return this},h.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,s=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(s[t]=e[t]);else s=e;return this.settings("immutable")?Object.defineProperty(s,"id",{value:i,enumerable:!0}):s.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(s),this.nodesIndex[s.id]=s,this}),h.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),this.allNeighborsIndex[i.source][i.target][i.id]=i,i.target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),h.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,s;for(delete this.nodesIndex[e],t=0,s=this.nodesArray.length;s>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),h.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,s;for(s=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;i>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[s.target][s.source][s.id],Object.keys(this.inNeighborsIndex[s.target][s.source]).length||delete this.inNeighborsIndex[s.target][s.source],delete this.outNeighborsIndex[s.source][s.target][s.id],Object.keys(this.outNeighborsIndex[s.source][s.target]).length||delete this.outNeighborsIndex[s.source][s.target],delete this.allNeighborsIndex[s.source][s.target][s.id],Object.keys(this.allNeighborsIndex[s.source][s.target]).length||delete this.allNeighborsIndex[s.source][s.target],s.target!==s.source&&(delete this.allNeighborsIndex[s.target][s.source][s.id],Object.keys(this.allNeighborsIndex[s.target][s.source]).length||delete this.allNeighborsIndex[s.target][s.source]),this.inNeighborsCount[s.target]--,this.outNeighborsCount[s.source]--,this.allNeighborsCount[s.source]--,this.allNeighborsCount[s.target]--,this}),h.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),h.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,i(this.nodesIndex),i(this.edgesIndex),i(this.nodesIndex),i(this.inNeighborsIndex),i(this.outNeighborsIndex),i(this.allNeighborsIndex),i(this.inNeighborsCount),i(this.outNeighborsCount),i(this.allNeighborsCount),this}),h.addMethod("read",function(e){var t,i,s;for(t=0,s=(i=e.nodes||[]).length;s>t;t++)this.addNode(i[t]);for(t=0,s=(i=e.edges||[]).length;s>t;t++)this.addEdge(i[t]);return this}),h.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";s.push(this.nodesIndex[e[t]])}return s}throw"nodes: Wrong arguments."}),h.addMethod("degree",function(e,t){if(t={in:this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,s,r=[];for(i=0,s=e.length;s>i;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t[e[i]])}return r}throw"degree: Wrong arguments."}),h.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";s.push(this.edgesIndex[e[t]])}return s}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.graph=h):this.graph=h}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,s){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof s&&s?i.embedObject(s):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,s,r=t||{},n=["x","y","ratio","angle"];for(i=0,s=n.length;s>i;i++)if(r[n[i]]!==e){if("number"!=typeof r[n[i]]||isNaN(r[n[i]]))throw'Value for "'+n[i]+'" is not a number.';this[n[i]]=r[n[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,s){s=s||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,n,a,o=s.nodes||this.graph.nodes(),l=s.edges||this.graph.edges(),d=Math.cos(this.angle),h=Math.sin(this.angle),c=Math.pow(this.ratio,this.settings("nodesPowRatio")),g=Math.pow(this.ratio,this.settings("edgesPowRatio"));for(r=0,n=o.length;n>r;r++)a=o[r],a[i+"x"]=(((a[t+"x"]||0)-this.x)*d+((a[t+"y"]||0)-this.y)*h)/this.ratio+(s.width||0)/2,a[i+"y"]=(((a[t+"y"]||0)-this.y)*d-((a[t+"x"]||0)-this.x)*h)/this.ratio+(s.height||0)/2,a[i+"size"]=(a[t+"size"]||0)/c;for(r=0,n=l.length;n>r;r++)l[r][i+"size"]=(l[r][t+"size"]||0)/g;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var s=0,r=0,n=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*n+this.y*a)/this.ratio,r=-(this.y*n-this.x*a)/this.ratio),{x:(e*n+t*a)/this.ratio+s,y:(t*n-e*a)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var s=0,r=0,n=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*n+this.y*a)/this.ratio,r=-(this.y*n-this.x*a)/this.ratio),{x:((e-s)*n-(t-r)*a)*this.ratio,y:((t-r)*n+(e-s)*a)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e))},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),s=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),n=this.cameraPosition(e/4,0,!0).x,a=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-n,y1:this.y-r.y-a,x2:this.x-r.x+n+i.x,y2:this.y-r.y-a+i.y,height:Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y+2*a,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,n=e.x<i;return r?n?0:1:n?2:3}function i(e,t){for(var i=[],s=0;4>s;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;4>s;s++)d.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,n=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),o=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=o,s=d;break;case 1:i=o+n,s=d;break;case 2:i=o,s=d+a;break;case 3:i=o+n,s=d+a}return l({x:i,y:s,width:n,height:a},r,t.maxElements,t.maxLevel)}function n(t,s,a){if(a.level<a.maxLevel)for(var o=i(s,a.corners),l=0,d=o.length;d>l;l++)a.nodes[o[l]]===e&&(a.nodes[o[l]]=r(o[l],a)),n(t,s,a.nodes[o[l]]);else a.elements.push(t)}function a(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?a(i,s.nodes[r]):[]}return s.elements}function o(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var n=s(t,i.corners),a=0,l=n.length;l>a;a++)i.nodes[n[a]]!==e&&o(t,i.nodes[n[a]],s,r);else for(var d=0,h=i.elements.length;h>d;d++)r[i.elements[d].id]===e&&(r[i.elements[d].id]=i.elements[d]);return r}function l(e,t,i,s){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||20,maxLevel:s||4,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],n=0;4>n;n++){var a=this.projection(t[n],e),o=this.projection(i[n],e);s.push(a.x*e.x+a.y*e.y),r.push(o.x*e.x+o.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return l>=Math.min.apply(Math,r)&&d>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;4>r;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1}};h.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var s=0,r=e.length;r>s;s++)n(e[s],d.pointToSquare({x:e[s][i+"x"],y:e[s][i+"y"],size:e[s][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._tree?a({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){var t,r,n=JSON.stringify(e);if(this._cache.query===n)return this._cache.result;d.isAxisAligned(e)?(t=i,r=d.axisAlignedTopPoints(e)):(t=s,r=d.rectangleCorners(e));var a=this._tree?o(r,this._tree,t):[],l=[];for(var h in a)l.push(a[h]);return this._cache.query=n,this._cache.result=l,l},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.quad=h):this.quad=h}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,n=e.x<i;return r?n?0:1:n?2:3}function i(e,t){for(var i=[],s=0;4>s;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;4>s;s++)d.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,n=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),o=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=o,s=d;break;case 1:i=o+n,s=d;break;case 2:i=o,s=d+a;break;case 3:i=o+n,s=d+a}return l({x:i,y:s,width:n,height:a},r,t.maxElements,t.maxLevel)}function n(t,s,a){if(a.level<a.maxLevel)for(var o=i(s,a.corners),l=0,d=o.length;d>l;l++)a.nodes[o[l]]===e&&(a.nodes[o[l]]=r(o[l],a)),n(t,s,a.nodes[o[l]]);else a.elements.push(t)}function a(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?a(i,s.nodes[r]):[]}return s.elements}function o(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var n=s(t,i.corners),a=0,l=n.length;l>a;a++)i.nodes[n[a]]!==e&&o(t,i.nodes[n[a]],s,r);else for(var d=0,h=i.elements.length;h>d;d++)r[i.elements[d].id]===e&&(r[i.elements[d].id]=i.elements[d]);return r}function l(e,t,i,s){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||40,maxLevel:s||8,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),s=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),n=Math.min(e.y1,e.y2,i.y),a=Math.max(e.y1,e.y2,i.y);return{x1:s-e.size,y1:n-e.size,x2:r+e.size,y2:n-e.size,height:a-n+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),s=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),n=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:n-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],n=0;4>n;n++){var a=this.projection(t[n],e),o=this.projection(i[n],e);s.push(a.x*e.x+a.y*e.y),r.push(o.x*e.x+o.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return l>=Math.min.apply(Math,r)&&d>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;4>r;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};h.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,s,r,a,o,h=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var c=e.edges(),g=0,u=c.length;u>g;g++)s=e.nodes(c[g].source),r=e.nodes(c[g].target),o={x1:s[h+"x"],y1:s[h+"y"],x2:r[h+"x"],y2:r[h+"y"],size:c[g][h+"size"]||0},"curve"===c[g].type||"curvedArrow"===c[g].type?s.id===r.id?(a={x:s[h+"x"],y:s[h+"y"],size:s[h+"size"]||0},n(c[g],d.selfLoopToSquare(a),this._tree)):(i=sigma.utils.getQuadraticControlPoint(o.x1,o.y1,o.x2,o.y2),n(c[g],d.quadraticCurveToSquare(o,i),this._tree)):n(c[g],d.lineToSquare(o),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._enabled&&this._tree?a({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){if(!this._enabled)return[];var t,r,n=JSON.stringify(e);if(this._cache.query===n)return this._cache.result;d.isAxisAligned(e)?(t=i,r=d.axisAlignedTopPoints(e)):(t=s,r=d.rectangleCorners(e));var a=this._tree?o(r,this._tree,t):[],l=[];for(var h in a)l.push(a[h]);return this._cache.query=n,this._cache.result=l,l},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.edgequad=h):this.edgequad=h}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function s(e){var t,i,s;return A("mouseEnabled")&&(b.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),f)?(p=!0,y=!0,v&&clearTimeout(v),v=setTimeout(function(){p=!1},A("dragTimeout")),sigma.misc.animation.killAll(w),w.isMoving=!0,s=w.cameraPosition(sigma.utils.getX(e)-u,sigma.utils.getY(e)-m,!0),t=d-s.x,i=h-s.y,(t!==w.x||i!==w.y)&&(c=w.x,g=w.y,w.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function r(e){if(A("mouseEnabled")&&f){f=!1,v&&clearTimeout(v),w.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);p?(sigma.misc.animation.killAll(w),sigma.misc.animation.camera(w,{x:w.x+A("mouseInertiaRatio")*(w.x-c),y:w.y+A("mouseInertiaRatio")*(w.y-g)},{easing:"quadraticOut",duration:A("mouseInertiaDuration")})):(u!==t||m!==i)&&w.goTo({x:w.x,y:w.y}),b.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),p=!1}}function n(e){if(A("mouseEnabled"))switch(d=w.x,h=w.y,c=w.x,g=w.y,u=sigma.utils.getX(e),m=sigma.utils.getY(e),y=!1,x=(new Date).getTime(),e.which){case 2:break;case 3:b.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,u,m));break;default:f=!0,b.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,u,m))}}function a(e){A("mouseEnabled")&&b.dispatchEvent("mouseout")}function o(e){if(A("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-x>100&&y,b.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,s;return A("mouseEnabled")&&A("mouseWheelEnabled")?(i=sigma.utils.getDelta(e)>0?1/A("zoomingRatio"):A("zoomingRatio"),t=w.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:A("mouseZoomDuration")},sigma.utils.zoomTo(w,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var d,h,c,g,u,m,f,p,y,x,v,b=this,E=e,w=t,A=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(E,"click",function(e){var t,i,s;return A("mouseEnabled")?(i=1/A("doubleClickZoomingRatio"),b.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,u,m)),A("doubleClickEnabled")&&(t=w.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:A("doubleClickZoomDuration")},sigma.utils.zoomTo(w,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}),E.addEventListener("DOMMouseScroll",l,!1),E.addEventListener("mousewheel",l,!1),E.addEventListener("mousemove",s,!1),E.addEventListener("mousedown",n,!1),E.addEventListener("click",o,!1),E.addEventListener("mouseout",a,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(E,"click"),E.removeEventListener("DOMMouseScroll",l),E.removeEventListener("mousewheel",l),E.removeEventListener("mousemove",s),E.removeEventListener("mousedown",n),E.removeEventListener("click",o),E.removeEventListener("mouseout",a),document.removeEventListener("mouseup",r)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function s(e){var t=sigma.utils.getOffset(C);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(N("touchEnabled")){var t,i,r,n,a,u;switch((M=e.touches).length){case 1:_.isMoving=!0,E=1,o=_.x,l=_.y,c=_.x,g=_.y,a=s(M[0]),f=a.x,p=a.y;break;case 2:return _.isMoving=!0,E=2,a=s(M[0]),u=s(M[1]),t=a.x,r=a.y,i=u.x,n=u.y,c=_.x,g=_.y,d=_.angle,h=_.ratio,o=_.x,l=_.y,f=t,p=r,y=i,x=n,v=Math.atan2(x-p,y-f),b=Math.sqrt((x-p)*(x-p)+(y-f)*(y-f)),e.preventDefault(),!1}}}function n(e){if(N("touchEnabled")){M=e.touches;var t=N("touchInertiaRatio");switch(T&&(w=!1,clearTimeout(T)),E){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:_.isMoving=!1,S.dispatchEvent("stopDrag"),w&&(A=!1,sigma.misc.animation.camera(_,{x:_.x+t*(_.x-c),y:_.y+t*(_.y-g)},{easing:"quadraticOut",duration:N("touchInertiaDuration")})),w=!1,E=0}}}function a(e){if(!A&&N("touchEnabled")){var t,i,r,n,a,C,P,k,I,O,z,L,R,j,F,B,H;switch(M=e.touches,w=!0,T&&clearTimeout(T),T=setTimeout(function(){w=!1},N("dragTimeout")),E){case 1:t=(k=s(M[0])).x,r=k.y,O=_.cameraPosition(t-f,r-p,!0),j=o-O.x,F=l-O.y,(j!==_.x||F!==_.y)&&(c=_.x,g=_.y,_.goTo({x:j,y:F}),S.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,k.x,k.y)),S.dispatchEvent("drag"));break;case 2:k=s(M[0]),I=s(M[1]),t=k.x,r=k.y,i=I.x,n=I.y,z=_.cameraPosition((f+y)/2-sigma.utils.getCenter(e).x,(p+x)/2-sigma.utils.getCenter(e).y,!0),P=_.cameraPosition((t+i)/2-sigma.utils.getCenter(e).x,(r+n)/2-sigma.utils.getCenter(e).y,!0),L=Math.atan2(n-r,i-t)-v,R=Math.sqrt((n-r)*(n-r)+(i-t)*(i-t))/b,t=z.x,r=z.y,B=h/R,r*=R,H=d-L,i=(t*=R)*(a=Math.cos(-L))+r*(C=Math.sin(-L)),r=n=r*a-t*C,j=(t=i)-P.x+o,F=r-P.y+l,(B!==_.ratio||H!==_.angle||j!==_.x||F!==_.y)&&(c=_.x,g=_.y,u=_.angle,m=_.ratio,_.goTo({x:j,y:F,angle:H,ratio:B}),S.dispatchEvent("drag"))}return e.preventDefault(),!1}}var o,l,d,h,c,g,u,m,f,p,y,x,v,b,E,w,A,T,S=this,C=e,_=t,N=i,M=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(C,"touchstart",function(e){var t,i,r;return e.touches&&1===e.touches.length&&N("touchEnabled")?(A=!0,i=1/N("doubleClickZoomingRatio"),t=s(e.touches[0]),S.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),N("doubleClickEnabled")&&(t=_.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),r={duration:N("doubleClickZoomDuration"),onComplete:function(){A=!1}},sigma.utils.zoomTo(_,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}),C.addEventListener("touchstart",r,!1),C.addEventListener("touchend",n,!1),C.addEventListener("touchcancel",n,!1),C.addEventListener("touchleave",n,!1),C.addEventListener("touchmove",a,!1),this.kill=function(){sigma.utils.unbindDoubleClick(C,"touchstart"),C.addEventListener("touchstart",r),C.addEventListener("touchend",n),C.addEventListener("touchcancel",n),C.addEventListener("touchleave",n),C.addEventListener("touchmove",a)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.canvas: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,n,a,o;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],r=0,n=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;n>r;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var i,s,r,n,a,o,l,d,h,c,g,u,m,f={},p=this.graph,y=this.graph.nodes,x=(this.options.prefix,this.settings(t,"drawEdges")),v=this.settings(t,"drawNodes"),b=this.settings(t,"drawLabels"),E=this.settings(t,"drawEdgeLabels"),w=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(x=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,n=i.length;n>s;s++)f[i[s].id]=i[s];if(x){for(i=p.edges(),s=0,n=i.length;n>s;s++)a=i[s],!f[a.source]&&!f[a.target]||a.hidden||y(a.source).hidden||y(a.target).hidden||this.edgesOnScreen.push(a);if(this.settings(t,"batchEdgesDrawing"))o="edges_"+this.conradId,u=w("canvasEdgesBatchSize"),c=this.edgesOnScreen,n=c.length,h=0,l=Math.min(c.length,h+u),d=function(){for(m=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",g=sigma.canvas.edges,s=h;l>s;s++)a=c[s],(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.edges,w);if(E)for(g=sigma.canvas.edges.labels,s=h;l>s;s++)(a=c[s]).hidden||(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.labels,w);return this.contexts.edges.globalCompositeOperation=m,l===c.length?(delete this.jobs[o],!1):(h=l+1,l=Math.min(c.length,h+u),!0)},this.jobs[o]=d,conrad.addJob(o,d.bind(this));else{for(g=sigma.canvas.edges,i=this.edgesOnScreen,s=0,n=i.length;n>s;s++)a=i[s],(g[a.type||this.settings(t,"defaultEdgeType")]||g.def)(a,p.nodes(a.source),p.nodes(a.target),this.contexts.edges,w);if(E)for(g=sigma.canvas.edges.labels,i=this.edgesOnScreen,s=0,n=i.length;n>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultEdgeType")]||g.def)(i[s],p.nodes(i[s].source),p.nodes(i[s].target),this.contexts.labels,w)}}if(v)for(g=sigma.canvas.nodes,i=this.nodesOnScreen,s=0,n=i.length;n>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultNodeType")]||g.def)(i[s],this.contexts.nodes,w);if(b)for(g=sigma.canvas.labels,i=this.nodesOnScreen,s=0,n=i.length;n>s;s++)i[s].hidden||(g[i[s].type||this.settings(t,"defaultNodeType")]||g.def)(i[s],this.contexts.labels,w);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var s,r=this.width,n=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||n!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.domElements[s].setAttribute("width",t*a+"px"),this.domElements[s].setAttribute("height",i*a+"px"),1!==a&&this.contexts[s].scale(a,a));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.webgl: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,n,a,o;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(s,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],r=0,n=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;n>r;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,s,r,n,a=this.graph,o=sigma.utils.extend(o,this.options);for(s in this.nodeFloatArrays)delete this.nodeFloatArrays[s];for(s in this.edgeFloatArrays)delete this.edgeFloatArrays[s];for(t=0,i=(e=a.edges()).length;i>t;t++)r=e[t].type||this.settings(o,"defaultEdgeType"),s=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[s]||(this.edgeFloatArrays[s]={edges:[]}),this.edgeFloatArrays[s].edges.push(e[t]);for(t=0,i=(e=a.nodes()).length;i>t;t++)r=e[t].type||this.settings(o,"defaultNodeType"),s=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[s]||(this.nodeFloatArrays[s]={nodes:[]}),this.nodeFloatArrays[s].nodes.push(e[t]);for(s in this.edgeFloatArrays)for(n=sigma.webgl.edges[s],e=this.edgeFloatArrays[s].edges,t=0,i=e.length;i>t;t++)this.edgeFloatArrays[s].array||(this.edgeFloatArrays[s].array=new Float32Array(e.length*n.POINTS*n.ATTRIBUTES)),e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||n.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[s].array,t*n.POINTS*n.ATTRIBUTES,o.prefix,this.settings);for(s in this.nodeFloatArrays)for(n=sigma.webgl.nodes[s],e=this.nodeFloatArrays[s].nodes,t=0,i=e.length;i>t;t++)this.nodeFloatArrays[s].array||(this.nodeFloatArrays[s].array=new Float32Array(e.length*n.POINTS*n.ATTRIBUTES)),e[t].hidden||n.addNode(e[t],this.nodeFloatArrays[s].array,t*n.POINTS*n.ATTRIBUTES,o.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,s,r,n,a,o,l=this,d=(this.graph,this.contexts.nodes),h=this.contexts.edges,c=this.camera.getMatrix(),g=sigma.utils.extend(t,this.options),u=this.settings(g,"drawLabels"),m=this.settings(g,"drawEdges"),f=this.settings(g,"drawNodes");this.resize(!1),this.settings(g,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),c=sigma.utils.matrices.multiply(c,sigma.utils.matrices.translation(this.width/2,this.height/2));for(n in this.jobs)conrad.hasJob(n)&&conrad.killJob(n);if(m)if(this.settings(g,"batchEdgesDrawing"))(function(){var e,t,i,s,r,n,a,o,l;i="edges_"+this.conradId,l=this.settings(g,"webglEdgesBatchSize"),(e=Object.keys(this.edgeFloatArrays)).length&&(t=0,o=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,a=0,n=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES),s=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=o.initProgram(h)),n>a&&(h.useProgram(this.edgePrograms[e[t]]),o.render(h,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio"),start:a,count:n-a})),n>=r.length/o.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(n>=r.length/o.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,o=sigma.webgl.edges[e[t]],a=0,n=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES)):(a=n,n=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES)),!0)},this.jobs[i]=s,conrad.addJob(i,s.bind(this)))}).call(this);else for(n in this.edgeFloatArrays)o=sigma.webgl.edges[n],this.edgePrograms[n]||(this.edgePrograms[n]=o.initProgram(h)),this.edgeFloatArrays[n]&&(h.useProgram(this.edgePrograms[n]),o.render(h,this.edgePrograms[n],this.edgeFloatArrays[n].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio")}));if(f){d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND);for(n in this.nodeFloatArrays)o=sigma.webgl.nodes[n],this.nodePrograms[n]||(this.nodePrograms[n]=o.initProgram(d)),this.nodeFloatArrays[n]&&(d.useProgram(this.nodePrograms[n]),o.render(d,this.nodePrograms[n],this.nodeFloatArrays[n].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(g,"webglOversamplingRatio")}))}if(u)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),a=function(e){return l.settings({prefix:l.camera.prefix},e)},s=0,r=i.length;r>s;s++)i[s].hidden||(sigma.canvas.labels[i[s].type||this.settings(g,"defaultNodeType")]||sigma.canvas.labels.def)(i[s],this.contexts.labels,a);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var s=document.createElement(e),r=this;s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(s.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),s.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,i){var s,r=this.width,n=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||n!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.contexts[s]&&this.contexts[s].scale?(this.domElements[s].setAttribute("width",t*a+"px"),this.domElements[s].setAttribute("height",i*a+"px"),1!==a&&this.contexts[s].scale(a,a)):(this.domElements[s].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[s].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(s in this.contexts)this.contexts[s]&&this.contexts[s].viewport&&this.contexts[s].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.svg: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,n,a,o,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],r=0,n=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;n>r;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var i,s,r,n,a,o,l,d,h,c={},g=this.graph,u=this.graph.nodes,m=(this.options.prefix,this.settings(t,"drawEdges")),f=this.settings(t,"drawNodes"),p=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),s=0,n=(i=this.nodesOnScreen).length;n>s;s++)c[i[s].id]=i[s];for(s=0,n=(i=g.edges()).length;n>s;s++)a=i[s],!c[a.source]&&!c[a.target]||a.hidden||u(a.source).hidden||u(a.target).hidden||this.edgesOnScreen.push(a);if(d=sigma.svg.nodes,h=sigma.svg.labels,f)for(i=this.nodesOnScreen,s=0,n=i.length;n>s;s++)i[s].hidden||this.domElements.nodes[i[s].id]||(r=(d[i[s].type]||d.def).create(i[s],p),this.domElements.nodes[i[s].id]=r,this.domElements.groups.nodes.appendChild(r),r=(h[i[s].type]||h.def).create(i[s],p),this.domElements.labels[i[s].id]=r,this.domElements.groups.labels.appendChild(r));if(f)for(i=this.nodesOnScreen,s=0,n=i.length;n>s;s++)i[s].hidden||((d[i[s].type]||d.def).update(i[s],this.domElements.nodes[i[s].id],p),(h[i[s].type]||h.def).update(i[s],this.domElements.labels[i[s].id],p));if(d=sigma.svg.edges,m)for(i=this.edgesOnScreen,s=0,n=i.length;n>s;s++)this.domElements.edges[i[s].id]||(o=u(i[s].source),l=u(i[s].target),r=(d[i[s].type]||d.def).create(i[s],o,l,p),this.domElements.edges[i[s].id]=r,this.domElements.groups.edges.appendChild(r));if(m)for(i=this.edgesOnScreen,s=0,n=i.length;n>s;s++)o=u(i[s].source),l=u(i[s].target),(d[i[s].type]||d.def).update(i[s],this.domElements.edges[i[s].id],o,l,p);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i,s,r=document.createElementNS(this.settings("xmlns"),e),n=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",n+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var a=document.createElement("canvas");a.setAttribute("class",n+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var o=["edges","nodes","labels","hovers"];for(s=0,i=o.length;i>s;s++)(t=document.createElementNS(this.settings("xmlns"),"g")).setAttributeNS(null,"id",n+"-group-"+o[s]),t.setAttributeNS(null,"class",n+"-group"),this.domElements.groups[o[s]]=this.domElements.graph.appendChild(t);this.container.appendChild(a),this.measurementCanvas=a.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){var t,i=sigma.svg.hovers,s=this;this.bind("overNode",function(r){var n=r.data.node,a=s.settings.embedObjects({prefix:e});if(a("enableHovering")){var o=(i[n.type]||i.def).create(n,s.domElements.nodes[n.id],s.measurementCanvas,a);s.domElements.hovers[n.id]=o,s.domElements.groups.hovers.appendChild(o),t=n}}),this.bind("outNode",function(i){var r=i.data.node;s.settings.embedObjects({prefix:e})("enableHovering")&&(s.domElements.groups.hovers.removeChild(s.domElements.hovers[r.id]),t=null,delete s.domElements.hovers[r.id],s.domElements.groups.nodes.appendChild(s.domElements.nodes[r.id]))}),this.bind("render",function(){if(t){var r=s.settings.embedObjects({prefix:e});s.domElements.groups.hovers.removeChild(s.domElements.hovers[t.id]),delete s.domElements.hovers[t.id];var n=(i[t.type]||i.def).create(t,s.domElements.nodes[t.id],s.measurementCanvas,r);s.domElements.hovers[t.id]=n,s.domElements.groups.hovers.appendChild(n)}})},sigma.renderers.svg.prototype.resize=function(t,i){var s=this.width,r=this.height;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),(s!==this.width||r!==this.height)&&(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=i+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",1*t),this.domElements.graph.setAttribute("height",1*i))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,i=!!e.WebGLRenderingContext;if(i){t=document.createElement("canvas");try{i=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){i=!1}}sigma.renderers.def=i?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,s,r){var n=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=n,t[i++]=0,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=n,t[i++]=2*Math.PI/3,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=n,t[i++]=4*Math.PI/3},render:function(e,t,i,s){var r,n=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),o=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),d=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(d,s.width,s.height),e.uniform1f(c,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(g,s.scalingRatio),e.uniformMatrix3fv(h,!1,s.matrix),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,s,r){t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,i,s){var r,n=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),o=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,s.width,s.height),e.uniform1f(h,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(c,s.scalingRatio),e.uniformMatrix3fv(d,!1,s.matrix),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,s,r,n,a){var o=(e[n+"size"]||1)/2,l=t[n+"x"],d=t[n+"y"],h=i[n+"x"],c=i[n+"y"],g=e.color;if(!g)switch(a("edgeColor")){case"source":g=t.color||a("defaultNodeColor");break;case"target":g=i.color||a("defaultNodeColor");break;default:g=a("defaultEdgeColor")}g=sigma.utils.floatColor(g),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=1,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=0,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=1,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=0,s[r++]=g},render:function(e,t,i,s){var r,n=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position1"),o=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_minus"),h=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_matrixHalfPi"),u=e.getUniformLocation(t,"u_matrixHalfPiMinus"),m=e.getUniformLocation(t,"u_ratio"),f=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(h,s.width,s.height),e.uniform1f(m,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(f,s.scalingRatio),e.uniformMatrix3fv(c,!1,s.matrix),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,s,r,n,a){var o=(e[n+"size"],t[n+"x"]),l=t[n+"y"],d=i[n+"x"],h=i[n+"y"],c=e.color;if(!c)switch(a("edgeColor")){case"source":c=t.color||a("defaultNodeColor");break;case"target":c=i.color||a("defaultNodeColor");break;default:c=a("defaultEdgeColor")}c=sigma.utils.floatColor(c),s[r++]=o,s[r++]=l,s[r++]=c,s[r++]=d,s[r++]=h,s[r++]=c},render:function(e,t,i,s){var r,n=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position"),o=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(o,s.width,s.height),e.uniformMatrix3fv(l,!1,s.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,s,r,n,a){var o=(e[n+"size"]||1)/2,l=t[n+"x"],d=t[n+"y"],h=i[n+"x"],c=i[n+"y"],g=i[n+"size"],u=e.color;if(!u)switch(a("edgeColor")){case"source":u=t.color||a("defaultNodeColor");break;case"target":u=i.color||a("defaultNodeColor");break;default:u=a("defaultEdgeColor")}u=sigma.utils.floatColor(u),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=g,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=g,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=c,s[r++]=o,s[r++]=g,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=-1,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=o,s[r++]=g,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=1,s[r++]=u},render:function(e,t,i,s){var r,n=e.getAttribLocation(t,"a_pos1"),a=e.getAttribLocation(t,"a_pos2"),o=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),d=e.getAttribLocation(t,"a_delay"),h=e.getAttribLocation(t,"a_minus"),c=e.getAttribLocation(t,"a_head"),g=e.getAttribLocation(t,"a_headPosition"),u=e.getAttribLocation(t,"a_color"),m=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),p=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),x=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_nodeRatio"),b=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(m,s.width,s.height),e.uniform1f(x,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(v,Math.pow(s.ratio,s.settings("nodesPowRatio"))/s.ratio),e.uniform1f(b,5),e.uniform1f(E,s.scalingRatio),e.uniformMatrix3fv(f,!1,s.matrix),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.enableVertexAttribArray(h),e.enableVertexAttribArray(c),e.enableVertexAttribArray(g),e.enableVertexAttribArray(u),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var s,r=i("prefix")||"",n=e[r+"size"];n<i("labelThreshold")||e.label&&"string"==typeof e.label&&(s="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*n,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+s+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+n+3),Math.round(e[r+"y"]+s/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var s,r,n,a,o,l=i("hoverFontStyle")||i("fontStyle"),d=i("prefix")||"",h=e[d+"size"],c="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*h;t.font=(l?l+" ":"")+c+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(s=Math.round(e[d+"x"]-c/2-2),r=Math.round(e[d+"y"]-c/2-2),n=Math.round(t.measureText(e.label).width+c/2+h+7),a=Math.round(c+4),o=Math.round(c/2+2),t.moveTo(s,r+o),t.arcTo(s,r,s+o,r,o),t.lineTo(s+n,r),t.lineTo(s+n,r+a),t.lineTo(s+o,r+a),t.arcTo(s,r+a,s,r+a-o,o),t.lineTo(s,r+o),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[d+"x"],e[d+"y"],h+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill()),(sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def)(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[d+"x"]+h+3),Math.round(e[d+"y"]+c/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var s=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[s+"x"],e[s+"y"],e[s+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!n)switch(l){case"source":n=t.color||d;break;case"target":n=i.color||d;break;default:n=h}s.strokeStyle=n,s.lineWidth=o,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},g=t[a+"size"],u=t[a+"x"],m=t[a+"y"],f=i[a+"x"],p=i[a+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,g):sigma.utils.getQuadraticControlPoint(u,m,f,p),!n)switch(l){case"source":n=t.color||d;break;case"target":n=i.color||d;break;default:n=h}s.strokeStyle=n,s.lineWidth=o,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,f,p):s.quadraticCurveTo(c.x,c.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,c=i[a+"size"],g=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],p=Math.max(2.5*h,r("minArrowSize")),y=Math.sqrt(Math.pow(m-g,2)+Math.pow(f-u,2)),x=g+(m-g)*(y-p-c)/y,v=u+(f-u)*(y-p-c)/y,b=(m-g)*p/y,E=(f-u)*p/y;if(!n)switch(o){case"source":n=t.color||l;break;case"target":n=i.color||l;break;default:n=d}s.strokeStyle=n,s.lineWidth=h,s.beginPath(),s.moveTo(g,u),s.lineTo(x,v),s.stroke(),s.fillStyle=n,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,i,s,r){var n,a,o,l,d,h=e.color,c=r("prefix")||"",g=r("edgeColor"),u=r("defaultNodeColor"),m=r("defaultEdgeColor"),f={},p=e[c+"size"]||1,y=i[c+"size"],x=t[c+"x"],v=t[c+"y"],b=i[c+"x"],E=i[c+"y"],w=Math.max(2.5*p,r("minArrowSize"));if(f=t.id===i.id?sigma.utils.getSelfLoopControlPoints(x,v,y):sigma.utils.getQuadraticControlPoint(x,v,b,E),t.id===i.id?(n=Math.sqrt(Math.pow(b-f.x1,2)+Math.pow(E-f.y1,2)),a=f.x1+(b-f.x1)*(n-w-y)/n,o=f.y1+(E-f.y1)*(n-w-y)/n,l=(b-f.x1)*w/n,d=(E-f.y1)*w/n):(n=Math.sqrt(Math.pow(b-f.x,2)+Math.pow(E-f.y,2)),a=f.x+(b-f.x)*(n-w-y)/n,o=f.y+(E-f.y)*(n-w-y)/n,l=(b-f.x)*w/n,d=(E-f.y)*w/n),!h)switch(g){case"source":h=t.color||u;break;case"target":h=i.color||u;break;default:h=m}s.strokeStyle=h,s.lineWidth=p,s.beginPath(),s.moveTo(x,v),t.id===i.id?s.bezierCurveTo(f.x2,f.y2,f.x1,f.y1,a,o):s.quadraticCurveTo(f.x,f.y,a,o),s.stroke(),s.fillStyle=h,s.beginPath(),s.moveTo(a+l,o+d),s.lineTo(a+.6*d,o-.6*l),s.lineTo(a-.6*d,o+.6*l),s.lineTo(a+l,o+d),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!n)switch(l){case"source":n=t.color||d;break;case"target":n=i.color||d;break;default:n=h}n="edge"===r("edgeHoverColor")?e.hover_color||n:e.hover_color||r("defaultEdgeHoverColor")||n,o*=r("edgeHoverSizeRatio"),s.strokeStyle=n,s.lineWidth=o,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=r("edgeHoverSizeRatio")*(e[a+"size"]||1),l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},g=t[a+"size"],u=t[a+"x"],m=t[a+"y"],f=i[a+"x"],p=i[a+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,g):sigma.utils.getQuadraticControlPoint(u,m,f,p),!n)switch(l){case"source":n=t.color||d;break;case"target":n=i.color||d;break;default:n=h}n="edge"===r("edgeHoverColor")?e.hover_color||n:e.hover_color||r("defaultEdgeHoverColor")||n,s.strokeStyle=n,s.lineWidth=o,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,f,p):s.quadraticCurveTo(c.x,c.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,s,r){var n=e.color,a=r("prefix")||"",o=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,c=i[a+"size"],g=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],p=2.5*(h=e.hover?r("edgeHoverSizeRatio")*h:h),y=Math.sqrt(Math.pow(m-g,2)+Math.pow(f-u,2)),x=g+(m-g)*(y-p-c)/y,v=u+(f-u)*(y-p-c)/y,b=(m-g)*p/y,E=(f-u)*p/y;if(!n)switch(o){case"source":n=t.color||l;break;case"target":n=i.color||l;break;default:n=d}n="edge"===r("edgeHoverColor")?e.hover_color||n:e.hover_color||r("defaultEdgeHoverColor")||n,s.strokeStyle=n,s.lineWidth=h,s.beginPath(),s.moveTo(g,u),s.lineTo(x,v),s.stroke(),s.fillStyle=n,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var n,a,o,l,d,h,c=e.color,g=r("prefix")||"",u=r("edgeColor"),m=r("defaultNodeColor"),f=r("defaultEdgeColor"),p={},y=r("edgeHoverSizeRatio")*(e[g+"size"]||1),x=i[g+"size"],v=t[g+"x"],b=t[g+"y"],E=i[g+"x"],w=i[g+"y"];if(p=t.id===i.id?sigma.utils.getSelfLoopControlPoints(v,b,x):sigma.utils.getQuadraticControlPoint(v,b,E,w),t.id===i.id?(n=Math.sqrt(Math.pow(E-p.x1,2)+Math.pow(w-p.y1,2)),a=2.5*y,o=p.x1+(E-p.x1)*(n-a-x)/n,l=p.y1+(w-p.y1)*(n-a-x)/n,d=(E-p.x1)*a/n,h=(w-p.y1)*a/n):(n=Math.sqrt(Math.pow(E-p.x,2)+Math.pow(w-p.y,2)),a=2.5*y,o=p.x+(E-p.x)*(n-a-x)/n,l=p.y+(w-p.y)*(n-a-x)/n,d=(E-p.x)*a/n,h=(w-p.y)*a/n),!c)switch(u){case"source":c=t.color||m;break;case"target":c=i.color||m;break;default:c=f}c="edge"===r("edgeHoverColor")?e.hover_color||c:e.hover_color||r("defaultEdgeHoverColor")||c,s.strokeStyle=c,s.lineWidth=y,s.beginPath(),s.moveTo(v,b),t.id===i.id?s.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,o,l):s.quadraticCurveTo(p.x,p.y,o,l),s.stroke(),s.fillStyle=c,s.beginPath(),s.moveTo(o+d,l+h),s.lineTo(o+.6*h,l-.6*d),s.lineTo(o-.6*h,l+.6*d),s.lineTo(o+d,l+h),s.closePath(),s.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,s,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,s,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,s,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){var i=(t("prefix"),document.createElementNS(t("xmlns"),"circle"));return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var s=i("prefix")||"";return t.setAttributeNS(null,"cx",e[s+"x"]),t.setAttributeNS(null,"cy",e[s+"y"]),t.setAttributeNS(null,"r",e[s+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,i,s){var r=e.color,n=(s("prefix"),s("edgeColor")),a=s("defaultNodeColor"),o=s("defaultEdgeColor");if(!r)switch(n){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=o}var l=document.createElementNS(s("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var n=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[n+"size"]||1),t.setAttributeNS(null,"x1",i[n+"x"]),t.setAttributeNS(null,"y1",i[n+"y"]),t.setAttributeNS(null,"x2",s[n+"x"]),t.setAttributeNS(null,"y2",s[n+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,i,s){var r=e.color,n=(s("prefix"),s("edgeColor")),a=s("defaultNodeColor"),o=s("defaultEdgeColor");if(!r)switch(n){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=o}var l=document.createElementNS(s("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var n=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[n+"size"]||1);var a=(i[n+"x"]+s[n+"x"])/2+(s[n+"y"]-i[n+"y"])/4,o=(i[n+"y"]+s[n+"y"])/2+(i[n+"x"]-s[n+"x"])/4,l="M"+i[n+"x"]+","+i[n+"y"]+" Q"+a+","+o+" "+s[n+"x"]+","+s[n+"y"];return t.setAttributeNS(null,"d",l),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var i=e[(t("prefix")||"")+"size"],s=document.createElementNS(t("xmlns"),"text"),r="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*i,n="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return s.setAttributeNS(null,"data-label-target",e.id),s.setAttributeNS(null,"class",t("classPrefix")+"-label"),s.setAttributeNS(null,"font-size",r),s.setAttributeNS(null,"font-family",t("font")),s.setAttributeNS(null,"fill",n),s.innerHTML=e.label,s.textContent=e.label,s},update:function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],n="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;return!i("forceLabels")&&r<i("labelThreshold")||"string"!=typeof e.label?void 0:(t.setAttributeNS(null,"x",Math.round(e[s+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[s+"y"]+n/3)),t.style.display="",this)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,i,s){var r,n,a,o=(s("hoverFontStyle")||s("fontStyle"),s("prefix")||""),l=e[o+"size"],d="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*l,h="node"===s("labelHoverColor")?e.color||s("defaultNodeColor"):s("defaultLabelHoverColor"),c=document.createElementNS(s("xmlns"),"g"),g=document.createElementNS(s("xmlns"),"rect"),u=document.createElementNS(s("xmlns"),"circle"),m=document.createElementNS(s("xmlns"),"text");return c.setAttributeNS(null,"class",s("classPrefix")+"-hover"),c.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(m.innerHTML=e.label,m.textContent=e.label,m.setAttributeNS(null,"class",s("classPrefix")+"-hover-label"),m.setAttributeNS(null,"font-size",d),m.setAttributeNS(null,"font-family",s("font")),m.setAttributeNS(null,"fill",h),m.setAttributeNS(null,"x",Math.round(e[o+"x"]+l+3)),m.setAttributeNS(null,"y",Math.round(e[o+"y"]+d/3)),Math.round(e[o+"x"]-d/2-2),Math.round(e[o+"y"]-d/2-2),r=Math.round(i.measureText(e.label).width+d/2+l+9),n=Math.round(d+4),a=Math.round(d/2+2),u.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),u.setAttributeNS(null,"fill","#fff"),u.setAttributeNS(null,"cx",e[o+"x"]),u.setAttributeNS(null,"cy",e[o+"y"]),u.setAttributeNS(null,"r",a),g.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),g.setAttributeNS(null,"fill","#fff"),g.setAttributeNS(null,"x",e[o+"x"]+a/4),g.setAttributeNS(null,"y",e[o+"y"]-a),g.setAttributeNS(null,"width",r),g.setAttributeNS(null,"height",n)),c.appendChild(u),c.appendChild(g),c.appendChild(m),c.appendChild(t),c}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var s,r,n,a,o,l,d,h,c=this.graph.nodes(),g=this.graph.edges(),u=this.settings.embedObjects(i||{}),m=u("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),f=m.minX,p=m.minY,y=m.maxX,x=m.maxY,v=m.sizeMax,b=m.weightMax,E=u("width")||1,w=u("height")||1,A=u("autoRescale"),T={nodePosition:1,nodeSize:1,edgeSize:1};for(A instanceof Array||(A=["nodePosition","nodeSize","edgeSize"]),s=0,r=A.length;r>s;s++)if(!T[A[s]])throw new Error('The rescale setting "'+A[s]+'" is not recognized.');var S=~A.indexOf("nodePosition"),C=~A.indexOf("nodeSize"),_=~A.indexOf("edgeSize");for(d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),y+=h=(u("rescaleIgnoreSize")?0:(u("maxNodeSize")||v)/d)+(u("sideMargin")||0),f-=h,x+=h,p-=h,d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),u("maxNodeSize")||u("minNodeSize")?u("maxNodeSize")===u("minNodeSize")?(n=0,a=+u("maxNodeSize")):(n=(u("maxNodeSize")-u("minNodeSize"))/v,a=+u("minNodeSize")):(n=1,a=0),u("maxEdgeSize")||u("minEdgeSize")?u("maxEdgeSize")===u("minEdgeSize")?(o=0,l=+u("minEdgeSize")):(o=(u("maxEdgeSize")-u("minEdgeSize"))/b,l=+u("minEdgeSize")):(o=1,l=0),s=0,r=g.length;r>s;s++)g[s][t+"size"]=g[s][e+"size"]*(_?o:1)+(_?l:0);for(s=0,r=c.length;r>s;s++)c[s][t+"size"]=c[s][e+"size"]*(C?n:1)+(C?a:0),c[s][t+"x"]=(c[s][e+"x"]-(y+f)/2)*(S?d:1),c[s][t+"y"]=(c[s][e+"y"]-(x+p)/2)*(S?d:1)},sigma.utils.getBoundaries=function(e,t,i){var s,r,n=e.edges(),a=e.nodes(),o=-1/0,l=-1/0,d=1/0,h=1/0,c=-1/0,g=-1/0;if(i)for(s=0,r=n.length;r>s;s++)o=Math.max(n[s][t+"size"],o);for(s=0,r=a.length;r>s;s++)l=Math.max(a[s][t+"size"],l),c=Math.max(a[s][t+"x"],c),d=Math.min(a[s][t+"x"],d),g=Math.max(a[s][t+"y"],g),h=Math.min(a[s][t+"y"],h);return o=o||1,l=l||1,{weightMax:o,sizeMax:l,minX:d,minY:h,maxX:c,maxY:g}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,s,r;if(t+""!=e+""){for(i=0,s=(r=this.graph.nodes()).length;s>i;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(i=0,s=(r=this.graph.edges()).length;s>i;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,s,r){if(!(i instanceof sigma.classes.camera&&"object"==typeof s&&s))throw"animation.camera: Wrong arguments.";if("number"!=typeof s.x&&"number"!=typeof s.y&&"number"!=typeof s.ratio&&"number"!=typeof s.angle)throw"There must be at least one valid coordinate in the given val.";var n,a,o,l,d,h=r||{},c=sigma.utils.dateNow();return d={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},h.duration,l="function"!=typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing,n=function(){var t,r=h.duration?(sigma.utils.dateNow()-c)/h.duration:1;r>=1?(i.isAnimated=!1,i.goTo({x:s.x!==e?s.x:d.x,y:s.y!==e?s.y:d.y,ratio:s.ratio!==e?s.ratio:d.ratio,angle:s.angle!==e?s.angle:d.angle}),cancelAnimationFrame(a),delete sigma.misc.animation.running[a],"function"==typeof h.onComplete&&h.onComplete()):(t=l(r),i.isAnimated=!0,i.goTo({x:s.x!==e?d.x+(s.x-d.x)*t:d.x,y:s.y!==e?d.y+(s.y-d.y)*t:d.y,ratio:s.ratio!==e?d.ratio+(s.ratio-d.ratio)*t:d.ratio,angle:s.angle!==e?d.angle+(s.angle-d.angle)*t:d.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),o.frameId=requestAnimationFrame(n))},a=t(),o={frameId:requestAnimationFrame(n),target:i,type:"camera",options:h,fn:n},sigma.misc.animation.running[a]=o,a},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,s=0,r="string"==typeof e?e:null,n="object"==typeof e?e:null,a=sigma.misc.animation.running;for(i in a)r&&a[i].type!==r||n&&a[i].target!==n||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),s++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return s},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,s="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||s&&r[t].target!==s))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function i(e){e&&(a="x"in e.data?e.data.x:a,o="y"in e.data?e.data.y:o);var i,s,r,n,d,h,c,g,u=[],m=a+l.width/2,f=o+l.height/2,p=l.camera.cameraPosition(a,o),y=l.camera.quadtree.point(p.x,p.y);if(y.length)for(i=0,r=y.length;r>i;i++)if(n=y[i],d=n[t+"x"],h=n[t+"y"],c=n[t+"size"],!n.hidden&&m>d-c&&d+c>m&&f>h-c&&h+c>f&&Math.sqrt(Math.pow(m-d,2)+Math.pow(f-h,2))<c){for(g=!1,s=0;s<u.length;s++)if(n.size>u[s].size){u.splice(s,0,n),g=!0;break}g||u.push(n)}return u}function s(i){function s(e,t){for(y=!1,d=0;d<e.length;d++)if(t.size>e[d].size){e.splice(d,0,t),y=!0;break}y||e.push(t)}if(!l.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&l instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(a="x"in i.data?i.data.x:a,o="y"in i.data?i.data.y:o);var n,d,h,c,g,u,m,f,p,y,x=l.settings("edgeHoverPrecision"),v={},b=[],E=a+l.width/2,w=o+l.height/2,A=l.camera.cameraPosition(a,o),T=[];if(r)for(n=0,h=(c=l.camera.quadtree.area(l.camera.getRectangle(l.width,l.height))).length;h>n;n++)v[c[n].id]=c[n];if(l.camera.edgequadtree!==e&&(T=l.camera.edgequadtree.point(A.x,A.y)),T.length)for(n=0,h=T.length;h>n;n++)g=T[n],m=l.graph.nodes(g.source),f=l.graph.nodes(g.target),u=g[t+"size"]||g["read_"+t+"size"],!g.hidden&&!m.hidden&&!f.hidden&&(!r||v[g.source]||v[g.target])&&sigma.utils.getDistance(m[t+"x"],m[t+"y"],E,w)>m[t+"size"]&&sigma.utils.getDistance(f[t+"x"],f[t+"y"],E,w)>f[t+"size"]&&("curve"==g.type||"curvedArrow"==g.type?m.id===f.id?(p=sigma.utils.getSelfLoopControlPoints(m[t+"x"],m[t+"y"],m[t+"size"]),sigma.utils.isPointOnBezierCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x1,p.y1,p.x2,p.y2,Math.max(u,x))&&s(b,g)):(p=sigma.utils.getQuadraticControlPoint(m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"]),sigma.utils.isPointOnQuadraticCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x,p.y,Math.max(u,x))&&s(b,g)):sigma.utils.isPointOnSegment(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],Math.max(u,x))&&s(b,g));return b}var r,n,a,o,l=this;for(r=0,n=this.captors.length;n>r;r++)!function(e){function t(e){if(l.settings("eventsEnabled")){r=i(e),n=s(e);var t,d,h,c,g=[],u=[],m={},f=r.length,p=[],y=[],x={},v=n.length;for(t=0;f>t;t++)h=r[t],m[h.id]=h,a[h.id]||(u.push(h),a[h.id]=h);for(d in a)m[d]||(g.push(a[d]),delete a[d]);for(t=0,f=u.length;f>t;t++)l.dispatchEvent("overNode",{node:u[t],captor:e.data});for(t=0,f=g.length;f>t;t++)l.dispatchEvent("outNode",{node:g[t],captor:e.data});for(u.length&&l.dispatchEvent("overNodes",{nodes:u,captor:e.data}),g.length&&l.dispatchEvent("outNodes",{nodes:g,captor:e.data}),t=0;v>t;t++)c=n[t],x[c.id]=c,o[c.id]||(y.push(c),o[c.id]=c);for(d in o)x[d]||(p.push(o[d]),delete o[d]);for(t=0,v=y.length;v>t;t++)l.dispatchEvent("overEdge",{edge:y[t],captor:e.data});for(t=0,v=p.length;v>t;t++)l.dispatchEvent("outEdge",{edge:p[t],captor:e.data});y.length&&l.dispatchEvent("overEdges",{edges:y,captor:e.data}),p.length&&l.dispatchEvent("outEdges",{edges:p,captor:e.data})}}var r,n,a={},o={};e.bind("click",function(e){l.settings("eventsEnabled")&&(l.dispatchEvent("click",e.data),r=i(e),n=s(e),r.length?(l.dispatchEvent("clickNode",{node:r[0],captor:e.data}),l.dispatchEvent("clickNodes",{node:r,captor:e.data})):n.length?(l.dispatchEvent("clickEdge",{edge:n[0],captor:e.data}),l.dispatchEvent("clickEdges",{edge:n,captor:e.data})):l.dispatchEvent("clickStage",{captor:e.data}))}),e.bind("mousedown",t),e.bind("mouseup",t),e.bind("mousemove",t),e.bind("mouseout",function(e){if(l.settings("eventsEnabled")){var t,i,s,r,n=[],d=[];for(t in a)n.push(a[t]);for(a={},i=0,s=n.length;s>i;i++)l.dispatchEvent("outNode",{node:n[i],captor:e.data});for(n.length&&l.dispatchEvent("outNodes",{nodes:n,captor:e.data}),o={},i=0,r=d.length;r>i;i++)l.dispatchEvent("outEdge",{edge:d[i],captor:e.data});d.length&&l.dispatchEvent("outEdges",{edges:d,captor:e.data})}}),e.bind("doubleclick",function(e){l.settings("eventsEnabled")&&(l.dispatchEvent("doubleClick",e.data),r=i(e),n=s(e),r.length?(l.dispatchEvent("doubleClickNode",{node:r[0],captor:e.data}),l.dispatchEvent("doubleClickNodes",{node:r,captor:e.data})):n.length?(l.dispatchEvent("doubleClickEdge",{edge:n[0],captor:e.data}),l.dispatchEvent("doubleClickEdges",{edge:n,captor:e.data})):l.dispatchEvent("doubleClickStage",{captor:e.data}))}),e.bind("rightclick",function(e){l.settings("eventsEnabled")&&(l.dispatchEvent("rightClick",e.data),r=i(e),n=s(e),r.length?(l.dispatchEvent("rightClickNode",{node:r[0],captor:e.data}),l.dispatchEvent("rightClickNodes",{node:r,captor:e.data})):n.length?(l.dispatchEvent("rightClickEdge",{edge:n[0],captor:e.data}),l.dispatchEvent("rightClickEdges",{edge:n,captor:e.data})):l.dispatchEvent("rightClickStage",{captor:e.data}))}),l.bind("render",t)}(this.captors[r])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(r.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(r.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(r.settings("classPrefix")+"-hover")}}function i(e){if(r.settings("eventsEnabled")){r.dispatchEvent("click",e);var i=new t(e.target);i.isNode()?r.dispatchEvent("clickNode",{node:n.nodes(i.attr("data-node-id"))}):r.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function s(e){if(r.settings("eventsEnabled")){r.dispatchEvent("doubleClick",e);var i=new t(e.target);i.isNode()?r.dispatchEvent("doubleClickNode",{node:n.nodes(i.attr("data-node-id"))}):r.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}var r=this,n=this.graph;e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",s),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",s),e.addEventListener("mouseover",function(e){var i=e.toElement||e.target;if(r.settings("eventsEnabled")&&i){var s=new t(i);if(s.isNode())r.dispatchEvent("overNode",{node:n.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var a=n.edges(s.attr("data-edge-id"));r.dispatchEvent("overEdge",{edge:a,source:n.nodes(a.source),target:n.nodes(a.target)})}}},!0),e.addEventListener("mouseout",function(e){var i=e.fromElement||e.originalTarget;if(r.settings("eventsEnabled")){var s=new t(i);if(s.isNode())r.dispatchEvent("outNode",{node:n.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var a=n.edges(s.attr("data-edge-id"));r.dispatchEvent("outEdge",{edge:a,source:n.nodes(a.source),target:n.nodes(a.target)})}}},!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){var t,n,a,o,l,d=i.contexts.hover.canvas,h=i.settings("defaultNodeType"),c=i.settings("defaultEdgeType"),g=sigma.canvas.hovers,u=sigma.canvas.edgehovers,m=sigma.canvas.extremities,f=i.settings.embedObjects({prefix:e});if(i.contexts.hover.clearRect(0,0,d.width,d.height),f("enableHovering")&&f("singleHover")&&Object.keys(s).length&&(o=s[Object.keys(s)[0]],(g[o.type]||g[h]||g.def)(o,i.contexts.hover,f)),f("enableHovering")&&!f("singleHover"))for(t in s)(g[s[t].type]||g[h]||g.def)(s[t],i.contexts.hover,f);if(f("enableEdgeHovering")&&f("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],n=i.graph.nodes(l.source),a=i.graph.nodes(l.target),l.hidden||((u[l.type]||u[c]||u.def)(l,n,a,i.contexts.hover,f),f("edgeHoverExtremities")?(m[l.type]||m.def)(l,n,a,i.contexts.hover,f):((sigma.canvas.nodes[n.type]||sigma.canvas.nodes.def)(n,i.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,i.contexts.hover,f)))),f("enableEdgeHovering")&&!f("singleHover"))for(t in r)l=r[t],n=i.graph.nodes(l.source),a=i.graph.nodes(l.target),l.hidden||((u[l.type]||u[c]||u.def)(l,n,a,i.contexts.hover,f),f("edgeHoverExtremities")?(m[l.type]||m.def)(l,n,a,i.contexts.hover,f):((sigma.canvas.nodes[n.type]||sigma.canvas.nodes.def)(n,i.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,i.contexts.hover,f)))}var i=this,s={},r={};this.bind("overNode",function(e){var i=e.data.node;i.hidden||(s[i.id]=i,t())}),this.bind("outNode",function(e){delete s[e.data.node.id],t()}),this.bind("overEdge",function(e){var i=e.data.edge;i.hidden||(r[i.id]=i,t())}),this.bind("outEdge",function(e){delete r[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this),function(){"use strict";sigma.canvas.nodes.circle=function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],n=e[s+"x"],a=e[s+"y"],o=e.label,l=n,d=a+r/2;t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(n,a,r,0,2*Math.PI,!1),t.fill(),t.closePath(),t.beginPath(),t.font="bold "+r/6+"ex monospace",t.textAlign="center",t.fillStyle="white",t.fillText(o,l,d),t.closePath()}}(),function(){"use strict";sigma.canvas.nodes.cell=function(e,t,i){var s=i("prefix")||"",r=2*e[s+"size"],n=2.4*e[s+"size"],a=e[s+"x"]-r/2,o=e[s+"y"]-n/2,l=e.attributes.num,d=a+.2*r,h=o+n*(.25-1/12),c=e.label,g=a+.8*r,u=o+n*(.25-1/12);t.strokeStyle="white",t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.rect(a,o,r,n),e.state&&t.fill(),t.stroke(),t.closePath(),t.beginPath(),t.font=n/48+"ex monospace",t.textAlign="center",t.fillStyle="white",t.fillText(l,d,h),t.closePath(),t.beginPath(),t.font=n/48+"ex monospace",t.textAlign="center",t.fillStyle="white",t.fillText(c,g,u),t.closePath(),t.beginPath();for(var m=e.attributes.expr,f=[],p=0;p<m.length/8;)f[p]=m.substring(8*p,8*(p+1)),p++;var y,x,v=n/(12*Math.max(.5+.5*(f[0].length-1),.75))+"ex ",b=a+r/2,E=r/(f.length+1);for(t.font=v+"monospace",t.textAlign="center",t.fillStyle="white",y=0;y<f.length;y++)x=(1.5+y)*E+o+(n-r),t.fillText(f[y],b,x);t.closePath()}}(),function(){"use strict";function e(e){if(s[e])return s[e];var t=[0,0,0];return e.match(/^#/)?t=3===(e=(e||"").replace(/^#/,"")).length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]:e.match(/^ *rgba? *\(/)&&(t=[+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+e[2],+e[3]]),s[e]={r:t[0],g:t[1],b:t[2]},s[e]}function t(t,i,s){t=e(t),i=e(i);var r={r:t.r*(1-s)+i.r*s,g:t.g*(1-s)+i.g*s,b:t.b*(1-s)+i.b*s};return"rgb("+[0|r.r,0|r.g,0|r.b].join(",")+")"}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var i=0,s={};sigma.plugins.animate=function(e,s,r){function n(){var i=(sigma.utils.dateNow()-g)/h;if(i>=1){a.forEach(function(e){for(var t in s)t in s&&(e[t]=e[s[t]])});var r;for(r in e.cameras)e.cameras[r].edgequadtree._enabled=!0;e.refresh(),"function"==typeof l.onComplete&&l.onComplete()}else i=c(i),a.forEach(function(e){for(var r in s)r in s&&(r.match(/color$/)?e[r]=t(o[e.id][r],e[s[r]],i):e[r]=e[s[r]]*i+o[e.id][r]*(1-i))}),e.refresh(),e.animations[d]=requestAnimationFrame(n)}var a,o,l=r||{},d=++i,h=l.duration||e.settings("animationsTime"),c="string"==typeof l.easing?sigma.utils.easings[l.easing]:"function"==typeof l.easing?l.easing:sigma.utils.easings.quadraticInOut,g=sigma.utils.dateNow();a=l.nodes&&l.nodes.length?"object"==typeof l.nodes[0]?l.nodes:e.graph.nodes(l.nodes):e.graph.nodes(),o=a.reduce(function(e,t){var i;e[t.id]={};for(i in s)i in t&&(e[t.id][i]=t[i]);return e},{}),e.animations=e.animations||Object.create({}),sigma.plugins.kill(e);var u;for(u in e.cameras)e.cameras[u].edgequadtree._enabled=!1;n()},sigma.plugins.kill=function(e){for(var t in e.animations||{})cancelAnimationFrame(e.animations[t]);for(t in e.cameras)e.cameras[t].edgequadtree._enabled=!0}}.call(window),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(e){}}return null},sigma.parsers.json=function(e,t,i){var s,r=sigma.utils.xhr();if(!r)throw"XMLHttpRequest not supported, cannot load the file.";r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&(s=JSON.parse(r.responseText),t instanceof sigma?(t.graph.clear(),t.graph.read(s)):"object"==typeof t?(t.graph=s,t=new sigma(t)):"function"==typeof t&&(i=t,t=null),i&&i(t||s))},r.send()}}.call(this);var S=function(){var e=document.getElementById("container"),t=e.offsetWidth,i=e.offsetHeight,s=1/6,r=Math.min(t/18*(1-s)/2,i/8*(5/6)*(1-s)/2),n="#3E3E3E";sigma.classes.graph.addMethod("getSize",function(e){var t,i=e||"",s=-1/0,r=1/0,n=-1/0,a=1/0,o=this.nodesIndex;for(t in o)o[t][i+"x"]>s&&(s=o[t][i+"x"]),o[t][i+"x"]<r&&(r=o[t][i+"x"]),o[t][i+"y"]>n&&(n=o[t][i+"y"]),o[t][i+"y"]<a&&(a=o[t][i+"y"]);return{xmin:r,xmax:s,ymin:a,ymax:n}}),sigma.classes.graph.addMethod("rescale",function(e,t,i){var s,r,n,a=e||[""],o=this,l=o.nodesIndex,d=[];for(r in a)d[r]=o.getSize(a[r]);for(n in d){var h=d[n].xmin+(d[n].xmax-d[n].xmin)/2,c=d[n].ymin+(d[n].ymax-d[n].ymin)/2,g=Math.min((1-3/18)*i/(d[n].ymax-d[n].ymin),(1-1/18)*t/(d[n].xmax-d[n].xmin));for(s in l)l[s][a[n]+"x"]=(l[s][a[n]+"x"]-h)*g,l[s][a[n]+"y"]=(l[s][a[n]+"y"]-c)*g}}),sigma.classes.graph.addMethod("setType",function(e){if("cell"==e)for(var t in this.nodesIndex)this.nodesIndex[t].type="cell",this.nodesIndex[t].size=r;else for(var t in this.nodesIndex)this.nodesIndex[t].size=10,this.nodesIndex[t].type="circle"}),sigma.classes.graph.addMethod("findExpr",function(e){var t,i=this.nodesIndex;if(parseInt(e[e.length-1])>3||0==parseInt(e[e.length-1]))return"31221132221222112112322211"==e.substring(0,e.length-1)?"94":"1311222113321132211221121332211"==e.substring(0,e.length-1)&&"93";for(t in i)if(i[t].attributes.expr==e)return t;return!1}),sigma.classes.graph.addMethod("findDesint",function(e){var t=this.nodesIndex;if(t[e])return t[e].attributes.desint}),sigma.classes.graph.addMethod("findLabel",function(e){var t=this.nodesIndex;if(t[e])return t[e].label}),sigma.classes.graph.addMethod("setEdgesAttr",function(e,t){var i,s,r;for(i in this.allNeighborsIndex[e])for(s in this.allNeighborsIndex[e][i])for(r in t)this.edgesIndex[s][r]=t[r]}),sigma.classes.graph.addMethod("setNodesState",function(e){var t,i,s,r,a=[];for(t in this.nodesIndex){if("dying"==this.nodesIndex[t].state){this.nodesIndex[t].color=n,delete this.nodesIndex[t].state;for(i in this.outNeighborsIndex[t])for(r in this.outNeighborsIndex[t][i])this.edgesIndex[r].color&&delete this.edgesIndex[r].color}"found"==this.nodesIndex[t].state||"created"==this.nodesIndex[t].state?(this.nodesIndex[t].color="blue",this.nodesIndex[t].state="dying",a.push(t)):-1!=e.indexOf(parseInt(t))&&(this.nodesIndex[t].color="green",this.nodesIndex[t].state="found")}for(s in a)for(i in this.outNeighborsIndex[a[s]]){this.nodesIndex[i].color="red",this.nodesIndex[i].state="created";for(r in this.outNeighborsIndex[a[s]][i])this.edgesIndex[r].color="red"}}),sigma.classes.graph.addMethod("initState",function(e){var t;for(t in this.nodesIndex)this.nodesIndex[t].state&&delete this.nodesIndex[t].state,delete this.nodesIndex[t].color;for(t in this.edgesIndex)delete this.edgesIndex[t].color});var a,o,t=(e=document.getElementById("container")).offsetWidth,i=e.offsetHeight,s=1/6,r=Math.min(t/18*(1-s)/2,i/8*(5/6)*(1-s)/2),n="#3E3E3E",l="table",d=new sigma({renderers:[{container:document.getElementById("container"),type:"canvas"}]});d.settings({doubleClickEnabled:!1,enableHovering:!1,drawLabels:!1,autoRescale:!1,autoResize:!1,edgeColor:"default",defaultEdgeColor:"#3E3E3E",defaultEdgeType:"curvedArrow",maxEdgeSize:10,maxNodeSize:100,defaultNodeColor:"#3E3E3E",nodesPowRatio:1,zoomMax:1,zoomMin:.1}),sigma.parsers.json("g.json",d,function(){d.graph.rescale(["","graph_","tab_"],t,i),d.graph.setType("cell"),d.refresh()});var h=function(){clearTimeout(o),o=setTimeout(function(){t=e.offsetWidth,i=e.offsetHeight,r=Math.min(t/18*(1-s)/2,i/8*(5/6)*(1-s)/2),d.graph.rescale(["","graph_","tab_"],t,i),"table"==l&&d.graph.setType("cell"),d.refresh()},50)};window.addEventListener("resize",function(){h()});var c=function(e){clearTimeout(a),a=setTimeout(function(){d.refresh()},200)};return d.bind("overNode",function(e){"graph"==l&&"circle"==e.data.node.type&&(e.data.node.type="cell",e.data.node.size=r,d.graph.setEdgesAttr(e.data.node.id,{size:2}),c())}),d.bind("outNode",function(e){"graph"==l&&"cell"==e.data.node.type&&(e.data.node.type="circle",e.data.node.size=10,d.graph.setEdgesAttr(e.data.node.id,{size:1}),c())}),document.getElementById("but").onclick=function(){if("table"==l){d.graph.setType("circle");sigma.plugins.animate(d,{x:"graph_x",y:"graph_y"},{onComplete:function(){l="graph"},duration:1e3})}else sigma.plugins.animate(d,{x:"tab_x",y:"tab_y"},{onComplete:function(){d.graph.setType("cell"),l="table",d.refresh()},duration:1e3})},d}();!function(e){var t=[],i=!1,s=!1,r=["1"],n=0,a=0,o=!0,l=function(){},d=!1,h=!1,c=!1,g=1,u=document.getElementById("exotic-seq"),m=document.getElementById("mixin-seq"),f=document.getElementById("naturel-seq"),p=document.getElementById("start"),y=document.getElementById("pause"),x=document.getElementById("seed"),v=document.getElementById("warm");p.addEventListener("submit",function(e){e.preventDefault(),c||b(x.value)},!1),y.addEventListener("click",function(e){T()},!1);var b=function(h){return r=[String(h)]||["1"],!isNaN(parseInt(h))&&(d?(t=[],i=!1,s=!1,n=1,e.graph.initState(),o=!0,a=0,c=!0,l=function(){c=!1,w(),d=!0,T(!1),E()},d=!1):(d=!0,T(!1),E()),!0)},E=function(){a>700&&o&&(T(!0,!0),o=!1);var s=(new Date).getTime();t=[],g=r.length,r=S(r,function(){a=(new Date).getTime()-s;var e=function(){if(!d)return l();setTimeout(function(){if(!h&&d)E();else{if(!d)return l();setTimeout(e,500)}},a>1e3?0:1e3-a)};e()}),n++,0==t.length||i||(i=!0),A(r),e.graph.setNodesState(t),e.refresh()},w=function(){u.innerHTML="",m.innerHTML="",f.innerHTML=""},A=function(t){var r,a,o="";for(r in t)"string"==typeof(a=t[r])?o+=a+" ":"number"==typeof a&&(o+=e.graph.findLabel(String(a))+" ");var l=document.createElement("li"),d=document.createElement("p");if(d.innerHTML=o,l.value=n,s){var h=document.createElement("p"),c=document.createElement("span"),p=document.createElement("span");c.innerHTML=t.length+" lments",p.innerHTML=" (x"+Math.round(1e3*t.length/g)/1e3+")",p.title="combien de fois ce terme contient plus d'lments que le terme prcdents",h.appendChild(c),h.appendChild(p),l.appendChild(h),f.insertBefore(l,f.firstChild)}else i?m.insertBefore(l,m.firstChild):u.insertBefore(l,u.firstChild);l.appendChild(d)},T=function(e,t){h=void 0!==e?e:!h,d?(y.disabled=!1,y.value=h?"Reprendre":"Pause"):y.disabled=!0,v.innerHTML=t?"Pause ! La gnration du terme suivant va prendre du temps. Pour continuer, appuyer sur reprendre.":""},S=function(t,i){var s,r,n=[];for(r in t)"string"==typeof(s=t[r])?(haveString=!0,n=n.concat(_(N(s)))):"number"==typeof s&&(n=n.concat(e.graph.findDesint(String(s))));return C(n),i&&i(),n},C=function(i){var r,n,a=!0;for(r in i)"string"==typeof i[r]&&((n=e.graph.findExpr(i[r]))?(i[r]=parseInt(n),t.push(parseInt(n))):a=!1);return!s&&a&&(s=!0),i},_=function(e){var t=e;return t=t.replace("212 ","2 12 "),t=t.replace("2121","2 121"),t=t.replace("2123","2 123"),t=t.replace("213 ","2 13 "),t=t.replace("2131","2 131"),t=t.replace("2132","2 132"),t=t.replace("21112","2 1112"),t=t.replace("21113","2 1113"),t=t.replace("2312","2 312"),t=t.replace("23112","2 3112"),t=t.replace("2313","2 313"),t=t.replace("23113","2 3113"),t=t.replace("2321","2 321"),t=t.replace("23221","2 3221"),t=t.replace("2323","2 323"),t=t.replace("23223","2 3223"),t=t.replace("122 ","1 22 "),t=t.replace("322 ","3 22 "),t=t.replace("122121","1 22 121"),t=t.replace("122123","1 22 123"),t=t.replace("122131","1 22 131"),t=t.replace("122132","1 22 132"),t=t.replace("322121","3 22 121"),t=t.replace("322123","3 22 123"),t=t.replace("322131","3 22 131"),t=t.replace("322132","3 22 132"),t=t.replace("1221112","1 22 1112"),t=t.replace("1221113","1 22 1113"),t=t.replace("3221112","3 22 1112"),t=t.replace("3221113","3 22 1113"),t=t.replace(/1(0|[4-9])1/,"1$1 1"),t=t.replace(/1(0|[4-9])2/,"1$1 2"),t=t.replace(/1(0|[4-9])3/,"1$1 3"),t=t.replace(/2(0|[4-9])1/,"2$1 1"),t=t.replace(/2(0|[4-9])2/,"2$1 2"),t=t.replace(/2(0|[4-9])3/,"2$1 3"),t=t.replace(/3(0|[4-9])1/,"3$1 1"),t=t.replace(/3(0|[4-9])2/,"3$1 2"),(t=t.replace(/3(0|[4-9])3/,"3$1 3")).split(" ")},N=function(e){for(var t=String(e),i=t[0],s=1,r=0,n="";r+1<t.length;)i==t[++r]?s++:(n+=s+i,s=1,i=t[r]);return n+=s+i}}(S);